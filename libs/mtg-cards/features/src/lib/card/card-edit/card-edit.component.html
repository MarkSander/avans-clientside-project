<div class="background">
  <div class="card-container">
    <div class="card">
      <h2 *ngIf="addMode">New card</h2>
      <h2 *ngIf="!addMode">Edit card</h2>
      <form [formGroup]="form" (ngSubmit)="OnSubmit()">
        <div class="form-row">
          <div class="form-group col">
            <label>Title</label>
            <input
              type="text"
              formControlName="title"
              class="form-control"
              required
            />
            <div
              [class.show]="title?.invalid && (title?.dirty || title?.touched)"
              class="error-message"
            >
              <div *ngIf="title?.errors?.['required']">Title is required</div>
              <div *ngIf="!title?.errors?.['required']">
                Something went wrong
              </div>
            </div>
          </div>
          <div class="form-group col">
            <label>Type</label>
            <select formControlName="type" class="form-control">
              <option
                *ngFor="let option of keys(typeOptions)"
                [ngValue]="option"
                required
              >
                {{ option }}
              </option>
            </select>
            <div
              [class.show]="type?.invalid && (type?.dirty || type?.touched)"
              class="error-message"
            >
              <div *ngIf="type?.errors?.['required']">Type is required</div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label>Rarity</label>
            <select formControlName="rarity" class="form-control">
              <option
                *ngFor="let option of keys(rarityOptions)"
                [ngValue]="option"
                required
              >
                {{ option }}
              </option>
            </select>
            <div
              [class.show]="
                rarity?.invalid && (rarity?.dirty || rarity?.touched)
              "
              class="error-message"
            >
              <div *ngIf="rarity?.errors?.['required']">Rarity is required</div>
            </div>
          </div>
          <div class="form-group col">
            <label>Foil</label>
            <input type="checkbox" formControlName="foil" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label>Manacost</label>
            <input
              type="number"
              formControlName="manacost"
              class="form-control"
              required
            />
            <div
              [class.show]="
                manacost?.invalid && (manacost?.dirty || manacost?.touched)
              "
              class="error-message"
            >
              <div *ngIf="manacost?.errors?.['required']">
                Manacost is required
              </div>
            </div>
          </div>
          <div class="form-group col">
            <label>Releasedate</label>
            <input
              type="date"
              formControlName="releasedate"
              class="form-control"
              required
            />
            <div
              [class.show]="
                releasedate?.invalid &&
                (releasedate?.dirty || releasedate?.touched)
              "
              class="error-message"
            >
              <div *ngIf="releasedate?.errors?.['required']">
                Releasedate is required
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col">
            <label>Set</label>
            <select formControlName="setId" class="form-control">
              <option *ngFor="let set of sets" [value]="set._id" required>
                {{ set.name }}
              </option>
            </select>
            <div
              [class.show]="set?.invalid && (set?.dirty || set?.touched)"
              class="error-message"
            >
              <div *ngIf="set?.errors?.['required']">Set is required</div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <button class="btn btn-primary" [disabled]="form.invalid">
            Save
          </button>
          <a routerLink="../" class="btn btn-link">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
